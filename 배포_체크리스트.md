# 배포 체크리스트

> AWS EC2 배포 전/후 확인사항

---

## 📦 GitHub 업로드 전 체크리스트

### 보안 체크
- [ ] `env.local.txt` 파일이 `.gitignore`에 포함되어 있는지 확인
- [ ] `.env.local` 파일이 `.gitignore`에 포함되어 있는지 확인
- [ ] API 키가 포함된 파일이 모두 제외되었는지 확인
- [ ] `env.example.txt` 템플릿 파일을 생성했는지 확인

### 파일 정리
- [ ] `node_modules/` 폴더가 `.gitignore`에 포함되어 있는지
- [ ] `.next/` 빌드 폴더가 `.gitignore`에 포함되어 있는지
- [ ] 테스트 파일들 (test*.js, test*.ps1 등)이 제외되었는지
- [ ] 로컬 전용 스크립트가 제외되었는지

### 코드 확인
- [ ] `package.json`에 모든 필요한 의존성이 포함되어 있는지
- [ ] `next.config.mjs` 설정이 올바른지
- [ ] `drizzle.config.ts` 데이터베이스 설정이 올바른지
- [ ] TypeScript 컴파일 에러가 없는지 (`npm run type-check`)

---

## 🔧 AWS EC2 설정 체크리스트

### EC2 인스턴스 생성
- [ ] Ubuntu Server 22.04 LTS 선택
- [ ] 인스턴스 타입 선택 (최소 t2.micro, 권장 t3.medium)
- [ ] 스토리지 30GB 이상 설정
- [ ] Key Pair (.pem 파일) 다운로드 및 안전한 곳에 보관

### Security Group 설정
- [ ] SSH (포트 22) - My IP로 제한
- [ ] HTTP (포트 80) - 0.0.0.0/0
- [ ] HTTPS (포트 443) - 0.0.0.0/0
- [ ] Custom TCP (포트 3000) - 0.0.0.0/0 (초기 테스트용)

### 네트워크 설정
- [ ] Elastic IP 할당 (권장)
- [ ] Public IP 활성화 확인

---

## 🚀 배포 과정 체크리스트

### 시스템 환경 설정
- [ ] SSH 접속 성공
- [ ] 시스템 업데이트 완료 (`sudo apt update && sudo apt upgrade -y`)
- [ ] Node.js v18 이상 설치 확인
- [ ] Git 설치 확인
- [ ] Nginx 설치 확인
- [ ] PM2 전역 설치 확인

### 애플리케이션 설치
- [ ] GitHub 저장소 클론 완료
- [ ] `.env.local` 파일 생성 및 환경 변수 설정 완료
- [ ] `npm install` 성공
- [ ] `npm run build` 성공
- [ ] 빌드 결과물 `.next/` 폴더 생성 확인

### 데이터베이스 설정
- [ ] Supabase 연결 확인
- [ ] DATABASE_URL 환경 변수 설정 확인
- [ ] Drizzle 마이그레이션 실행 (`npm run db:push`)
- [ ] 데이터베이스 테이블 생성 확인

---

## 🌐 웹 서버 설정 체크리스트

### Nginx 설정
- [ ] Nginx 설정 파일 생성 (`/etc/nginx/sites-available/ad-copy-generator`)
- [ ] 심볼릭 링크 생성 확인
- [ ] 기본 설정 파일 비활성화
- [ ] Nginx 설정 테스트 통과 (`sudo nginx -t`)
- [ ] Nginx 재시작 성공

### PM2 프로세스 관리
- [ ] PM2로 애플리케이션 시작
- [ ] PM2 상태 확인 (`pm2 status`)
- [ ] PM2 자동 시작 설정 (`pm2 startup`)
- [ ] 현재 프로세스 저장 (`pm2 save`)

---

## ✅ 배포 완료 후 확인사항

### 기본 기능 테스트
- [ ] 웹 브라우저에서 `http://EC2_IP` 접속 가능
- [ ] 홈페이지가 정상적으로 로드됨
- [ ] 회원가입 페이지 접속 가능
- [ ] 로그인 페이지 접속 가능

### 핵심 기능 테스트
- [ ] 회원가입 정상 작동
- [ ] 로그인 정상 작동
- [ ] 대시보드 접속 가능
- [ ] 광고 문구 생성 페이지 접속 가능
- [ ] AI 모델 연동 확인 (테스트 생성)

### 데이터베이스 연동 확인
- [ ] 사용자 등록 시 데이터베이스에 저장 확인
- [ ] 생성된 광고 문구가 히스토리에 저장되는지 확인
- [ ] Supabase 대시보드에서 데이터 확인

### 성능 및 보안
- [ ] 페이지 로딩 속도 확인 (3초 이내)
- [ ] API 응답 속도 확인
- [ ] HTTPS 설정 (도메인이 있는 경우)
- [ ] 환경 변수가 노출되지 않는지 확인

---

## 🔍 모니터링 체크리스트

### 로그 확인
- [ ] PM2 로그 확인 (`pm2 logs`)
- [ ] Nginx 액세스 로그 확인 (`/var/log/nginx/access.log`)
- [ ] Nginx 에러 로그 확인 (`/var/log/nginx/error.log`)
- [ ] 시스템 로그 확인 (`sudo journalctl -xe`)

### 리소스 모니터링
- [ ] CPU 사용률 확인 (`htop` or `top`)
- [ ] 메모리 사용률 확인 (`free -h`)
- [ ] 디스크 사용량 확인 (`df -h`)
- [ ] PM2 모니터링 대시보드 확인 (`pm2 monit`)

---

## 🛡️ 보안 강화 체크리스트

### 방화벽 설정
- [ ] UFW 방화벽 활성화
- [ ] 필요한 포트만 오픈
- [ ] SSH 포트 접근 제한 (IP 화이트리스트)

### 환경 변수 보안
- [ ] `.env.local` 파일 권한 확인 (`chmod 600 .env.local`)
- [ ] JWT_SECRET이 강력한 랜덤 문자열로 설정되었는지
- [ ] 프로덕션용 API 키 사용 확인

### 정기 업데이트
- [ ] 시스템 자동 업데이트 설정
- [ ] Node.js 보안 패치 적용
- [ ] npm 패키지 보안 취약점 확인 (`npm audit`)

---

## 📊 성능 최적화 체크리스트

### 애플리케이션 최적화
- [ ] Next.js 프로덕션 빌드 사용 (`npm run build`)
- [ ] 이미지 최적화 설정
- [ ] API 응답 캐싱 설정
- [ ] CDN 사용 고려 (정적 파일)

### 서버 최적화
- [ ] Nginx 압축 설정 (gzip)
- [ ] Nginx 캐싱 설정
- [ ] PM2 클러스터 모드 고려
- [ ] Swap 파일 설정 (메모리 부족 시)

---

## 🔄 자동화 체크리스트

### CI/CD 설정 (선택사항)
- [ ] GitHub Actions 워크플로우 설정
- [ ] 자동 테스트 설정
- [ ] 자동 배포 파이프라인 구축
- [ ] 배포 알림 설정 (Slack, Discord 등)

### 백업 설정
- [ ] 데이터베이스 정기 백업 스크립트
- [ ] 애플리케이션 코드 백업
- [ ] 환경 변수 파일 안전 백업
- [ ] Cron 작업 설정 (자동 백업)

---

## 📝 문서화 체크리스트

### 프로젝트 문서
- [ ] README.md 업데이트 (배포 정보 포함)
- [ ] API 문서 작성 (사용 중인 엔드포인트)
- [ ] 환경 변수 문서 (`env.example.txt`)
- [ ] 아키텍처 다이어그램 업데이트

### 운영 문서
- [ ] 장애 대응 매뉴얼
- [ ] 롤백 절차 문서화
- [ ] 모니터링 지표 정의
- [ ] 담당자 연락처 정리

---

## 🎯 배포 완료 최종 확인

### 기능 테스트
- [ ] 모든 페이지 정상 작동
- [ ] AI 문구 생성 정상 작동
- [ ] 이미지 업로드 및 분석 정상 작동
- [ ] 사용자 인증 정상 작동

### 성능 테스트
- [ ] 동시 사용자 10명 이상 테스트
- [ ] API 응답 속도 측정
- [ ] 메모리 누수 확인
- [ ] 부하 테스트 실시

### 최종 점검
- [ ] 도메인 연결 (있는 경우)
- [ ] SSL 인증서 설치 (HTTPS)
- [ ] 에러 모니터링 설정
- [ ] 팀원들과 공유

---

## 📞 배포 후 지원

문제 발생 시:
1. PM2 로그 확인: `pm2 logs ad-copy-generator`
2. Nginx 로그 확인: `sudo tail -f /var/log/nginx/error.log`
3. 시스템 리소스 확인: `htop`
4. 재시작: `pm2 restart ad-copy-generator`

---

**마지막 업데이트**: 2025-11-18  
**체크리스트 버전**: 1.0.0

