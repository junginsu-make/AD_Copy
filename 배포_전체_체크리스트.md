# ë°°í¬ ì „ì²´ ì²´í¬ë¦¬ìŠ¤íŠ¸

> AWS EC2 ë°°í¬ ì „ì²´ ê³¼ì • ìš”ì•½

---

## ğŸ“š ë‹¨ê³„ë³„ ê°€ì´ë“œ ë¬¸ì„œ

| ìˆœì„œ | ë¬¸ì„œëª… | ì†Œìš” ì‹œê°„ | ë‚œì´ë„ |
|------|--------|-----------|--------|
| 1 | `EC2_ì¸ìŠ¤í„´ìŠ¤_ìƒì„±_ë‹¨ê³„ë³„_ê°€ì´ë“œ.md` | 10ë¶„ | â­â­â˜†â˜†â˜† |
| 2 | `EC2_SSH_ì ‘ì†_ê°€ì´ë“œ.md` | 5ë¶„ | â­â­â˜†â˜†â˜† |
| 3 | `EC2_í™˜ê²½_ì„¤ì •_ë°_ë°°í¬_ê°€ì´ë“œ.md` | 20ë¶„ | â­â­â­â˜†â˜† |

**ì´ ì†Œìš” ì‹œê°„**: ì•½ 35-40ë¶„

---

## âœ… 1ë‹¨ê³„: EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (10ë¶„)

### AWS Console ì ‘ì†
- [ ] AWS Console ë¡œê·¸ì¸ (https://console.aws.amazon.com)
- [ ] ì§€ì—­ ì„ íƒ: ì„œìš¸ (ap-northeast-2)
- [ ] EC2 ì„œë¹„ìŠ¤ë¡œ ì´ë™

### ì¸ìŠ¤í„´ìŠ¤ ê¸°ë³¸ ì„¤ì •
- [ ] Launch Instance í´ë¦­
- [ ] ì´ë¦„: `ad-copy-generator-server`
- [ ] AMI: Ubuntu Server 22.04 LTS
- [ ] ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…: 
  - [ ] t2.micro (ë¬´ë£Œ í…ŒìŠ¤íŠ¸)
  - [ ] t3.medium (ê¶Œì¥)

### Key Pair ìƒì„±
- [ ] Create new key pair í´ë¦­
- [ ] ì´ë¦„: `ad-copy-key`
- [ ] íƒ€ì…: RSA
- [ ] í˜•ì‹: .pem
- [ ] **ë‹¤ìš´ë¡œë“œëœ `ad-copy-key.pem` íŒŒì¼ ì•ˆì „í•˜ê²Œ ë³´ê´€**

### Network Settings
- [ ] VPC: default (ê¸°ë³¸ê°’)
- [ ] Auto-assign public IP: **Enable**
- [ ] Security group name: `ad-copy-sg`
- [ ] Security group rules ì„¤ì •:
  - [ ] SSH (22) - My IP
  - [ ] HTTP (80) - 0.0.0.0/0
  - [ ] HTTPS (443) - 0.0.0.0/0
  - [ ] Custom TCP (3000) - 0.0.0.0/0

### Storage
- [ ] í¬ê¸°: 30 GB
- [ ] ë³¼ë¥¨ íƒ€ì…: gp3

### Launch
- [ ] Launch instance í´ë¦­
- [ ] ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ: Running í™•ì¸
- [ ] **Public IPv4 address ë©”ëª¨**

### Elastic IP (ì„ íƒì‚¬í•­, ê¶Œì¥)
- [ ] Elastic IP í• ë‹¹
- [ ] ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°

---

## âœ… 2ë‹¨ê³„: SSH ì ‘ì† (5ë¶„)

### í‚¤ íŒŒì¼ ì¤€ë¹„
- [ ] `ad-copy-key.pem` íŒŒì¼ ìœ„ì¹˜ í™•ì¸
- [ ] PowerShellì—ì„œ ê¶Œí•œ ì„¤ì •:
  ```powershell
  icacls ad-copy-key.pem /inheritance:r
  icacls ad-copy-key.pem /grant:r "$($env:USERNAME):R"
  ```

### SSH ì ‘ì†
- [ ] PowerShell ì‹¤í–‰
- [ ] SSH ì ‘ì† ëª…ë ¹ì–´:
  ```powershell
  ssh -i "$HOME\.ssh\ad-copy-key.pem" ubuntu@EC2-Public-IP
  ```
- [ ] ì²« ì ‘ì† ì‹œ "yes" ì…ë ¥
- [ ] ì ‘ì† ì„±ê³µ í™•ì¸: `ubuntu@ip-xxx:~$`

### ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
- [ ] íŒ¨í‚¤ì§€ ëª©ë¡ ì—…ë°ì´íŠ¸:
  ```bash
  sudo apt update
  ```
- [ ] ì‹œìŠ¤í…œ ì—…ê·¸ë ˆì´ë“œ:
  ```bash
  sudo apt upgrade -y
  ```
- [ ] ê¸°ë³¸ ë„êµ¬ ì„¤ì¹˜:
  ```bash
  sudo apt install -y git curl wget vim build-essential
  ```

---

## âœ… 3ë‹¨ê³„: í™˜ê²½ ì„¤ì • ë° ë°°í¬ (20ë¶„)

### Node.js ì„¤ì¹˜
- [ ] NodeSource ì €ì¥ì†Œ ì¶”ê°€:
  ```bash
  curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
  ```
- [ ] Node.js ì„¤ì¹˜:
  ```bash
  sudo apt install -y nodejs
  ```
- [ ] ë²„ì „ í™•ì¸:
  ```bash
  node --version  # v18.x.x
  npm --version   # 9.x.x
  ```

### GitHub ì €ì¥ì†Œ í´ë¡ 
- [ ] í™ˆ ë””ë ‰í† ë¦¬ë¡œ ì´ë™:
  ```bash
  cd ~
  ```
- [ ] ì €ì¥ì†Œ í´ë¡ :
  ```bash
  git clone https://github.com/junginsu-make/AD_Copy.git
  ```
- [ ] í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™:
  ```bash
  cd AD_Copy
  ```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] `.env.local` íŒŒì¼ ìƒì„±:
  ```bash
  nano .env.local
  ```
- [ ] í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ ì…ë ¥:
  - [ ] `NEXT_PUBLIC_SUPABASE_URL`
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - [ ] `DATABASE_URL`
  - [ ] `JWT_SECRET`
  - [ ] `OPENAI_API_KEY`
  - [ ] `ANTHROPIC_API_KEY`
  - [ ] `PERPLEXITY_API_KEY`
  - [ ] `GEMINI_API_KEY_1` ~ `GEMINI_API_KEY_5`
- [ ] ì €ì¥ ë° ì¢…ë£Œ: Ctrl+X â†’ Y â†’ Enter
- [ ] íŒŒì¼ ê¶Œí•œ ì„¤ì •:
  ```bash
  chmod 600 .env.local
  ```

### ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ
- [ ] npm íŒ¨í‚¤ì§€ ì„¤ì¹˜:
  ```bash
  npm install
  ```
- [ ] í”„ë¡œë•ì…˜ ë¹Œë“œ:
  ```bash
  npm run build
  ```

### PM2 ì„¤ì¹˜ ë° ì‹¤í–‰
- [ ] PM2 ì „ì—­ ì„¤ì¹˜:
  ```bash
  sudo npm install -g pm2
  ```
- [ ] PM2ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘:
  ```bash
  pm2 start npm --name "ad-copy-generator" -- start
  ```
- [ ] ìƒíƒœ í™•ì¸:
  ```bash
  pm2 status
  ```
- [ ] ë¡œê·¸ í™•ì¸:
  ```bash
  pm2 logs ad-copy-generator --lines 20
  ```

### PM2 ìë™ ì‹œì‘ ì„¤ì •
- [ ] Startup ì„¤ì •:
  ```bash
  pm2 startup
  ```
- [ ] ì¶œë ¥ëœ ëª…ë ¹ì–´ ë³µì‚¬ í›„ ì‹¤í–‰
- [ ] í˜„ì¬ í”„ë¡œì„¸ìŠ¤ ì €ì¥:
  ```bash
  pm2 save
  ```

### Nginx ì„¤ì¹˜ ë° ì„¤ì • (ì„ íƒì‚¬í•­, ê¶Œì¥)
- [ ] Nginx ì„¤ì¹˜:
  ```bash
  sudo apt install -y nginx
  ```
- [ ] ì„¤ì • íŒŒì¼ ìƒì„±:
  ```bash
  sudo nano /etc/nginx/sites-available/ad-copy-generator
  ```
- [ ] Nginx ì„¤ì • ì…ë ¥ (ê°€ì´ë“œ ì°¸ê³ )
- [ ] ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±:
  ```bash
  sudo ln -s /etc/nginx/sites-available/ad-copy-generator /etc/nginx/sites-enabled/
  sudo rm /etc/nginx/sites-enabled/default
  ```
- [ ] ì„¤ì • í…ŒìŠ¤íŠ¸:
  ```bash
  sudo nginx -t
  ```
- [ ] Nginx ì¬ì‹œì‘:
  ```bash
  sudo systemctl restart nginx
  ```

---

## âœ… 4ë‹¨ê³„: ë°°í¬ ì™„ë£Œ í™•ì¸

### ë¸Œë¼ìš°ì € ì ‘ì† í…ŒìŠ¤íŠ¸
- [ ] í¬íŠ¸ 3000ìœ¼ë¡œ ì ‘ì† (PM2ë§Œ):
  ```
  http://EC2-Public-IP:3000
  ```
- [ ] í¬íŠ¸ 80ìœ¼ë¡œ ì ‘ì† (Nginx ì„¤ì • ì‹œ):
  ```
  http://EC2-Public-IP
  ```

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] í™ˆí˜ì´ì§€ ë¡œë”© í™•ì¸
- [ ] íšŒì›ê°€ì… í˜ì´ì§€ ì ‘ì†
- [ ] ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ì†
- [ ] íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸
- [ ] ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
- [ ] ëŒ€ì‹œë³´ë“œ ì ‘ì†
- [ ] ê´‘ê³  ë¬¸êµ¬ ìƒì„± í˜ì´ì§€ ì ‘ì†
- [ ] AI ë¬¸êµ¬ ìƒì„± í…ŒìŠ¤íŠ¸

### ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
- [ ] PM2 ìƒíƒœ: `pm2 status`
- [ ] PM2 ë¡œê·¸: `pm2 logs ad-copy-generator`
- [ ] Nginx ìƒíƒœ (ì„¤ì • ì‹œ): `sudo systemctl status nginx`
- [ ] ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰: `df -h`
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: `free -h`

---

## ğŸ“Š ë°°í¬ ì™„ë£Œ ìƒíƒœ

```
âœ… AWS EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
âœ… SSH ì ‘ì† ì„±ê³µ
âœ… Node.js v18 ì„¤ì¹˜
âœ… GitHub ì €ì¥ì†Œ í´ë¡ 
âœ… í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
âœ… npm install ì™„ë£Œ
âœ… npm run build ì™„ë£Œ
âœ… PM2 ì‹¤í–‰
âœ… PM2 ìë™ ì‹œì‘ ì„¤ì •
âœ… Nginx ì„¤ì • (ì„ íƒ)
âœ… ë¸Œë¼ìš°ì € ì ‘ì† ì„±ê³µ
âœ… ì‹œìŠ¤í…œ ì •ìƒ ì‘ë™
```

---

## ğŸ”§ ì£¼ìš” ëª…ë ¹ì–´ ìš”ì•½

### PM2 ê´€ë¦¬
```bash
pm2 status                    # ìƒíƒœ í™•ì¸
pm2 logs ad-copy-generator    # ë¡œê·¸ ë³´ê¸°
pm2 restart ad-copy-generator # ì¬ì‹œì‘
pm2 stop ad-copy-generator    # ì¤‘ì§€
pm2 monit                     # ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
```

### Nginx ê´€ë¦¬
```bash
sudo systemctl status nginx   # ìƒíƒœ í™•ì¸
sudo systemctl restart nginx  # ì¬ì‹œì‘
sudo nginx -t                 # ì„¤ì • í…ŒìŠ¤íŠ¸
sudo tail -f /var/log/nginx/error.log  # ì—ëŸ¬ ë¡œê·¸
```

### ì½”ë“œ ì—…ë°ì´íŠ¸
```bash
cd ~/AD_Copy
git pull
npm install
npm run build
pm2 restart ad-copy-generator
```

---

## ğŸ†˜ ë¬¸ì œ ë°œìƒ ì‹œ

### 1. SSH ì ‘ì† ì•ˆ ë¨
- Security Groupì—ì„œ SSH (22) í¬íŠ¸ í™•ì¸
- í‚¤ íŒŒì¼ ê¶Œí•œ í™•ì¸
- EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ í™•ì¸ (Running)

### 2. npm install ì˜¤ë¥˜
```bash
rm -rf node_modules package-lock.json
npm install
```

### 3. ë¹Œë“œ ì˜¤ë¥˜
```bash
rm -rf .next
npm run build
```

### 4. PM2 ì¬ì‹œì‘ í•„ìš”
```bash
pm2 restart ad-copy-generator
pm2 logs ad-copy-generator
```

### 5. í™˜ê²½ ë³€ìˆ˜ ì˜¤ë¥˜
```bash
nano .env.local  # ìˆ˜ì •
pm2 restart ad-copy-generator
```

---

## ğŸ’° ì˜ˆìƒ ë¹„ìš© (ì›”ê°„)

### í”„ë¦¬í‹°ì–´ (t2.micro)
- EC2: ë¬´ë£Œ (750ì‹œê°„)
- ìŠ¤í† ë¦¬ì§€ 30GB: ë¬´ë£Œ
- **ì´**: $0

### í”„ë¡œë•ì…˜ (t3.medium)
- EC2: ì•½ $36
- ìŠ¤í† ë¦¬ì§€ 30GB: ì•½ $3
- Elastic IP: $0 (ì‚¬ìš© ì¤‘)
- **ì´**: ì•½ $40/ì›”

---

## ğŸ“ ì¶”ê°€ ê°œì„  ì‚¬í•­ (ì„ íƒ)

- [ ] ë„ë©”ì¸ ì—°ê²°
- [ ] SSL ì¸ì¦ì„œ ì„¤ì¹˜ (Let's Encrypt)
- [ ] CloudWatch ëª¨ë‹ˆí„°ë§ ì„¤ì •
- [ ] ìë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸
- [ ] CI/CD íŒŒì´í”„ë¼ì¸ (GitHub Actions)

---

## ğŸ‰ ë°°í¬ ì™„ë£Œ!

ì¶•í•˜í•©ë‹ˆë‹¤! ê´‘ê³  ì†Œì¬ ë¬¸êµ¬ ìƒì„± ì‹œìŠ¤í…œì´ AWS EC2ì—ì„œ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤.

**ì ‘ì† URL**: `http://EC2-Public-IP`

---

**ì‘ì„±ì¼**: 2025-11-18  
**ë°°í¬ ìƒíƒœ**: âœ… ì™„ë£Œ  
**ì‹œìŠ¤í…œ ìƒíƒœ**: ğŸŸ¢ ì •ìƒ ì‘ë™

